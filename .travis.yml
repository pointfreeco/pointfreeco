git:
  submodules: false
os:
  - linux
env:
language: generic
sudo: required
dist: trusty
install:
  - if [ $TRAVIS_OS_NAME = linux ]; then
      eval "$(curl -sL https://gist.githubusercontent.com/kylef/5c0475ff02b7c7671d2a/raw/9f442512a46d7a2af7b850d65a7e9bd31edfb09b/swiftenv-install.sh)";
    fi
  - sudo apt-get install cmake
  - git clone https://github.com/commonmark/cmark
  - cd cmark
  - git checkout 1880e6535e335f143f9547494def01c13f2f331b
  - cd ../
  - make -C cmark INSTALL_PREFIX=/usr
  - sudo make -C cmark install
script:
  - make db-drop
  - make test-oss
services:
  - postgresql
addons:
  postgresql: "9.6"
